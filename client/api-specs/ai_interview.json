{
  "openapi": "3.1.0",
  "info": {
    "title": "AI Interview Microservice",
    "description": "A comprehensive AI-powered interview microservice with real-time video analysis",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "/interview"
    }
  ],
  "paths": {
    "/interview/start": {
      "post": {
        "tags": [
          "interview"
        ],
        "summary": "Start Interview",
        "description": "Start a new interview session.",
        "operationId": "start_interview_interview_start_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InterviewStartRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InterviewStartResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/interview/{session_id}/history": {
      "get": {
        "tags": [
          "interview"
        ],
        "summary": "Get Conversation History",
        "description": "Get the complete conversation history for a session.",
        "operationId": "get_conversation_history_interview__session_id__history_get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/interview/reply": {
      "post": {
        "tags": [
          "interview"
        ],
        "summary": "Submit Reply",
        "description": "Submit user response and get next question.",
        "operationId": "submit_reply_interview_reply_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/InterviewReplyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InterviewReplyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/interview/analysis/{session_id}": {
      "get": {
        "tags": [
          "interview"
        ],
        "summary": "Get Interview Analysis",
        "description": "Get comprehensive analysis of an interview session.",
        "operationId": "get_interview_analysis_interview_analysis__session_id__get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/analyze/health": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "Analysis Health",
        "description": "Health check for analysis service.",
        "operationId": "ai_interview_analysis_health_analyze_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/analyze/frame": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "Analyze Frame",
        "description": "Analyze video frame for real-time metrics.",
        "operationId": "analyze_frame_analyze_frame_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FrameAnalysisRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FrameAnalysisResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/analyze/session/{session_id}/metrics": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "Get Session Metrics",
        "description": "Get session metrics for a specific interview session.",
        "operationId": "get_session_metrics_analyze_session__session_id__metrics_get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/analyze/session/{session_id}/trends": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "Get Performance Trends",
        "description": "Get performance trends for a specific interview session.",
        "operationId": "get_performance_trends_analyze_session__session_id__trends_get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/user/{user_id}/profile": {
      "get": {
        "tags": [
          "user"
        ],
        "summary": "Get User Profile",
        "description": "Get user profile information.",
        "operationId": "get_user_profile_user__user_id__profile_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "user"
        ],
        "summary": "Update User Profile",
        "description": "Update user profile information.",
        "operationId": "update_user_profile_user__user_id__profile_post",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true,
                "title": "Profile Data"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/user/{user_id}/progress": {
      "get": {
        "tags": [
          "user"
        ],
        "summary": "Get User Progress",
        "description": "Get user's interview progress and statistics.",
        "operationId": "get_user_progress_user__user_id__progress_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/user/{user_id}/recommendations": {
      "get": {
        "tags": [
          "user"
        ],
        "summary": "Get User Recommendations",
        "description": "Get personalized recommendations for the user.",
        "operationId": "get_user_recommendations_user__user_id__recommendations_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/user/{user_id}/history": {
      "get": {
        "tags": [
          "user"
        ],
        "summary": "Get User History",
        "description": "Get user's interview history.",
        "operationId": "get_user_history_user__user_id__history_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "days",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 30,
              "title": "Days"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/audio/devices": {
      "get": {
        "tags": [
          "audio"
        ],
        "summary": "Get Audio Devices",
        "description": "Get list of available audio input devices.",
        "operationId": "get_audio_devices_audio_devices_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/audio/record": {
      "post": {
        "tags": [
          "audio"
        ],
        "summary": "Record Audio",
        "description": "Record audio for a specified duration and return transcription.",
        "operationId": "record_audio_audio_record_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_record_audio_audio_record_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/audio/transcribe": {
      "post": {
        "tags": [
          "audio"
        ],
        "summary": "Transcribe Audio File",
        "description": "Transcribe an uploaded audio file.",
        "operationId": "transcribe_audio_file_audio_transcribe_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_transcribe_audio_file_audio_transcribe_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/templates/": {
      "get": {
        "tags": [
          "templates"
        ],
        "summary": "Get Templates",
        "description": "Get all available interview templates.",
        "operationId": "get_templates_templates__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          }
        }
      }
    },
    "/templates/{template_id}": {
      "get": {
        "tags": [
          "templates"
        ],
        "summary": "Get Template",
        "description": "Get a specific interview template.",
        "operationId": "get_template_templates__template_id__get",
        "parameters": [
          {
            "name": "template_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Template Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/templates/recommendations": {
      "get": {
        "tags": [
          "templates"
        ],
        "summary": "Get Template Recommendations",
        "description": "Get template recommendations based on user preferences.",
        "operationId": "get_template_recommendations_templates_recommendations_get",
        "parameters": [
          {
            "name": "position",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Position"
            }
          },
          {
            "name": "experience_level",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Experience Level"
            }
          },
          {
            "name": "industry",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Industry"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {

                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Health check endpoint",
        "operationId": "ai_interview_health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Body_record_audio_audio_record_post": {
        "properties": {
          "audio": {
            "type": "string",
            "format": "binary",
            "title": "Audio"
          },
          "duration": {
            "type": "number",
            "title": "Duration",
            "default": 5
          }
        },
        "type": "object",
        "title": "Body_record_audio_audio_record_post"
      },
      "Body_transcribe_audio_file_audio_transcribe_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_transcribe_audio_file_audio_transcribe_post"
      },
      "CompanyTemplate": {
        "type": "string",
        "enum": [
          "google",
          "amazon",
          "microsoft",
          "apple",
          "meta",
          "netflix",
          "startup",
          "consulting",
          "custom"
        ],
        "title": "CompanyTemplate"
      },
      "DifficultyLevel": {
        "type": "string",
        "enum": [
          "easy",
          "intermediate",
          "hard"
        ],
        "title": "DifficultyLevel"
      },
      "FrameAnalysisRequest": {
        "properties": {
          "frame_data": {
            "type": "string",
            "title": "Frame Data"
          }
        },
        "type": "object",
        "required": [
          "frame_data"
        ],
        "title": "FrameAnalysisRequest"
      },
      "FrameAnalysisResponse": {
        "properties": {
          "posture": {
            "additionalProperties": true,
            "type": "object",
            "title": "Posture"
          },
          "eye_contact": {
            "additionalProperties": true,
            "type": "object",
            "title": "Eye Contact"
          },
          "facial_expression": {
            "additionalProperties": true,
            "type": "object",
            "title": "Facial Expression"
          },
          "hand_gestures": {
            "additionalProperties": true,
            "type": "object",
            "title": "Hand Gestures"
          },
          "head_movement": {
            "additionalProperties": true,
            "type": "object",
            "title": "Head Movement"
          },
          "overall_score": {
            "type": "number",
            "title": "Overall Score"
          },
          "confidence_score": {
            "type": "number",
            "title": "Confidence Score"
          },
          "real_time_suggestions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Real Time Suggestions"
          },
          "timestamp": {
            "type": "number",
            "title": "Timestamp"
          }
        },
        "type": "object",
        "required": [
          "posture",
          "eye_contact",
          "facial_expression",
          "hand_gestures",
          "head_movement",
          "overall_score",
          "confidence_score",
          "real_time_suggestions",
          "timestamp"
        ],
        "title": "FrameAnalysisResponse"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status"
          },
          "version": {
            "type": "string",
            "title": "Version"
          },
          "services": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Services"
          }
        },
        "type": "object",
        "required": [
          "status",
          "version",
          "services"
        ],
        "title": "HealthResponse"
      },
      "IndustryType": {
        "type": "string",
        "enum": [
          "technology",
          "finance",
          "healthcare",
          "marketing",
          "consulting",
          "education",
          "retail",
          "manufacturing",
          "other"
        ],
        "title": "IndustryType"
      },
      "InterviewMode": {
        "type": "string",
        "enum": [
          "practice",
          "assessment"
        ],
        "title": "InterviewMode"
      },
      "InterviewReplyRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "user_response": {
            "type": "string",
            "title": "User Response"
          },
          "input_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Input Method",
            "default": "text"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "user_response"
        ],
        "title": "InterviewReplyRequest"
      },
      "InterviewReplyResponse": {
        "properties": {
          "next_question": {
            "type": "string",
            "title": "Next Question"
          },
          "feedback": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Feedback"
          },
          "is_final": {
            "type": "boolean",
            "title": "Is Final",
            "default": false
          },
          "analysis": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis"
          },
          "real_time_feedback": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Real Time Feedback"
          }
        },
        "type": "object",
        "required": [
          "next_question"
        ],
        "title": "InterviewReplyResponse"
      },
      "InterviewStartRequest": {
        "properties": {
          "interview_type": {
            "$ref": "#/components/schemas/InterviewType",
            "default": "behavioral"
          },
          "position": {
            "type": "string",
            "title": "Position"
          },
          "experience_level": {
            "$ref": "#/components/schemas/DifficultyLevel",
            "default": "intermediate"
          },
          "preferred_language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preferred Language"
          },
          "mode": {
            "$ref": "#/components/schemas/InterviewMode",
            "default": "assessment"
          },
          "industry": {
            "$ref": "#/components/schemas/IndustryType",
            "default": "technology"
          },
          "company_template": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CompanyTemplate"
              },
              {
                "type": "null"
              }
            ]
          },
          "custom_instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Custom Instructions"
          },
          "user_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Id"
          }
        },
        "type": "object",
        "required": [
          "position"
        ],
        "title": "InterviewStartRequest"
      },
      "InterviewStartResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "first_question": {
            "type": "string",
            "title": "First Question"
          },
          "interview_type": {
            "$ref": "#/components/schemas/InterviewType"
          },
          "mode": {
            "$ref": "#/components/schemas/InterviewMode"
          },
          "template_info": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Template Info"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "first_question",
          "interview_type",
          "mode"
        ],
        "title": "InterviewStartResponse"
      },
      "InterviewType": {
        "type": "string",
        "enum": [
          "behavioral"
        ],
        "title": "InterviewType"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}